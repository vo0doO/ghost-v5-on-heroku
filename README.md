# [Ghost 4.X](https://github.com/TryGhost/Ghost) on [Heroku](https://heroku.com)
> Извещение: Если вы получаете ошибку политики Heroku, пожалуйста, обратитесь к этому [discussion](https://github.com/vo0doo/ghost-v5-on-heroku/discussions/24).

Ghost – самая популярная в мире современная издательская платформа для создания новой медиа-платформы. Он использовался Apple, SkyNews, Buffer, OpenAI и тысячами других.
Вы можете посетить сайт проекта по адресу <a href="https://ghost.org/" target="_blank">https://ghost.org</a>, или прочитайте документацию на <a href="https://ghost.org/docs" target="_blank">https://ghost.org/docs</a>.

### Развертывать

[![Развернуть](https://www.herokucdn.com/deploy/button.svg)](https://heroku.com/deploy?template=https://github.com/vo0doo/ghost-v5-on-heroku)

> Я готов работать с частными лицами или компаниями, которые хотят создать свою невероятно быструю издательскую платформу.. [Contact-Me](https://t.me/kirsanovd)


Если приведенная выше кнопка не работает для вас, отключите все, что может блокировать Heroku от вывода реферера (e.g. Brave shield), или попробуйте это: https://heroku.com/deploy?template=https://github.com/vo0doo/ghost-v5-on-heroku (Если вы используете форк, обязательно укажите ссылку шаблона на репозиторий).

**ЗАМЕТКА**: мы поддерживаем развертывания путем загрузки исходного файла или копирования через клонированную папку. Загрузка/копирование папок имеет тенденцию разрушать символические ссылки, поэтому мы рекомендуем вам выполнить развертывание, нажав кнопку в этом репозитории или форке на GitHub.

### Что вы должны знать

После развертывания,

- Во-первых, посетите Ghost в `https://YOURAPPNAME.herokuapp.com/ghost` Чтобы настроить учетную запись администратора, выполните следующие действия.
- Оживление приложения может занять несколько минут
- Ваш блог будет общедоступным по адресу `https://YOURAPPNAME.herokuapp.com`
- Если вы впоследствии настроили [custom domain](https://devcenter.heroku.com/articles/custom-domains) для вашего блога вам нужно будет обновить блог Ghost `APP_PUBLIC_URL` соответствующая переменная среды
- Если вы создаете много контента или решаете масштабировать dynos для поддержки большего трафика, потребуется более существенный, платный план базы данных.

### Настройка загрузки файлов S3

Блог настроен на использование хранилища файлов Cloudinary по умолчанию. Если вы хотите настроить файловое хранилище S3, создайте корзину S3 в VK CS или Timeweb, а затем укажите следующие сведения в качестве переменных среды на странице развертывания Heroku (или добавьте эти переменные среды в приложение после развертывания с помощью панели мониторинга Heroku).:

- `S3_ACCESS_KEY_ID` и `S3_ACCESS_SECRET_KEY`: **Требуется при использовании загрузки S3**. Эти поля представляют собой пару ключ/секрет vkcs, необходимую для аутентификации в Amazon S3. Вы должны предоставить этой паре ключей достаточные разрешения для рассматриваемой корзины S3, чтобы загрузка S3 работала.

- `S3_BUCKET_NAME`: **Требуется при использовании загрузки S3**. Это имя, которое вы дали своей корзине S3.

- `S3_BUCKET_REGION`: **Требуется при использовании загрузки S3**. Укажите область, в которой была создана корзина, используя формат slug (e.g. `msk-1`, `,msk-2`). Полный список регионов S3 [доступно здесь](http://docs.vkcs.amazon.com/general/latest/gr/rande.html#s3_region).

- `S3_ASSET_HOST_URL`: Необязательно, даже если используется загрузка S3. Эта переменная используется для указания URL-адреса корзины S3 в стиле виртуального узла, стиле пути или с помощью личного домена. Следует также включить косую черту в конце (пример `https://my.custom.domain/`). Видеть [this page](http://docs.vkcs.amazon.com/AmazonS3/latest/dev/VirtualHosting.html) подробнее.

Как только ваше приложение будет запущено и запущено с этими переменными, вы сможете загружать изображения через интерфейс Ghost, и они будут храниться в VKCS S3. :sparkles:

### Настройка службы SMTP

Когда вы впервые запускаете heroku dyno, mailgun по умолчанию настраивается с учетной записью песочницы. Это означает, что поддерживается отправка электронных писем только авторизованным получателям. Если вы хотите отправлять электронные письма / invite ваши соавторы вам нужно настроить их электронную почту в разделе авторизованных получателей на панели инструментов mailgun. Видеть https://help.mailgun.com/hc/en-us/articles/217531258-Authorized-Recipients для большего.

Более постоянным решением было бы использование личного домена и проверка вашего домена через службу поддержки клиентов mailgun. Аплодисменты!

FYI: Вы можете получить доступ к панели инструментов mailgun, посетив панель инструментов heroku > нажмите на вкладку > ресурсов вашего приложения > нажмите на дополнение mailgun.

### Смена значение Config Vars в Heroku
Как изменить значение `APP_PUBLIC_URL`, `MAILGUN_API_KEY`, `MAILGUN_DOMAIN`, `MAILGUN_PUBLIC_KEY`, `MAILGUN_SMTP_LOGIN`, `MYSQL_DATABASE_URL or JvkcsDB_URL`, `S3_ACCESS_KEY_ID` ...и так далее?
Вы не можете изменить значение в `config.production.json` Но можно изменить значения с помощью кнопки `Heroku CLI` или `Heroku Dashboard`.
Для получения дополнительной информации прочитайте <a href="https://lovekesh.tech/how-to-create-update-and-delete-config-vars-in-the-heroku-app/" target="_blank">здесь</a>

### Отказ

Этот репозиторий имеет несколько блоков открытого исходного кода. Я взял этот код из репозиториев предыдущей версии развертывания ghost на Heroku. 

### Проблемы или нужна помощь?
- [Задать вопрос](https://ask.codebulbs.com/)
- [Открыть выпуск](https://github.com/vo0doo/ghost-v5-on-heroku/issues/new/)
- [Использование обсуждений GitHub](https://github.com/vo0doo/ghost-v5-on-heroku/discussions)

### Лицензия
Выпущено под [MIT лицензия](https://github.com/vo0doo/ghost-v5-on-heroku/blob/main/LICENSE), так же, как и сам проект Ghost.

